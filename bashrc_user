# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
	. /etc/bashrc
fi

# User specific environment
if ! [[ "$PATH" =~ "$HOME/.local/bin:$HOME/bin:" ]]
then
    PATH="$HOME/.local/bin:$HOME/bin:$PATH"
fi
PATH="/usr/local/bin:$PATH"
export PATH

# NGPS local environment (preferred)
SCRIPT_DIR="$(cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd)"
if [ -f "${SCRIPT_DIR}/env.sh" ]; then
    source "${SCRIPT_DIR}/env.sh"
fi

alias python="/usr/bin/python3.9"

# PYTHONPATH is set in env.sh

# Data for sky background calculator used by rubin_sim package used by ETC
export RUBIN_SIM_DATA_DIR="/data/rubin_sim/"

# Uncomment the following line if you don't like systemctl's auto-paging feature:
# export SYSTEMD_PAGER=

# User specific aliases and functions

#alias ngps-plan="/usr/local/palomar/deployment/NGPS_GUI/ngpsgui.sh PLAN"
alias sourcemacro="source ~/.bashrc"

export XPA_NSUSERS="*"  # Allow this user's XPA to access ds9 windows from any other user

# Stop desktop windows from resizing (only if display is available)
if [ -n "$DISPLAY" ]; then
    gsettings set org.gnome.mutter edge-tiling false
fi

# FITS files
alias lastfits='ls *.fits -Art | tail -n 1'
#alias lastfits2='ls *.fits -Art | tail -n 2 | head -n 1'  # next to last
if [ -n "${NGPS_ROOT}" ] && [ -d "${NGPS_ROOT}/Python/FITS_tools" ]; then
    alias ds9last="${NGPS_ROOT}/Python/FITS_tools/ds9last.sh 1"
    alias ds9last1="${NGPS_ROOT}/Python/FITS_tools/ds9last.sh 1"
    alias ds9last2="${NGPS_ROOT}/Python/FITS_tools/ds9last.sh 2"
fi
#alias ds9lastGo='/home/developer/Software/Python/FITS_tools/ds9-script.py `lastfits`'
#alias ds9last2='/home/developer/Software/Python/FITS_tools/ds9-script.py `lastfits2`'
#alias ds9last='lf=`lastfits`; busy=`lsof -w -c camerad | grep $lf | wc -l` ; if [[ $busy -gt 0 ]]; then echo FILE NOT READY!!!  SO IMPATIENT!  Try ds9last2; fi; ds9lastGo'


#source $HOME/bashrc_dev
