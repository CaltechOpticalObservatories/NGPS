# configuration file for slicecam daemon
# @SLICECAMD_CFG_COMMENT@
#
LOGPATH=/data/logs/
BLKPORT=@SLICECAMD_BLK_PORT@          # server blocking port
NBPORT=@SLICECAMD_NB_PORT@            # server non-blocking port
DAEMON=no                         # is this run as a daemon?
STDOUT=/tmp/slicecamd.stdout          # where to send stdout
STDERR=/tmp/slicecamd.stderr          # where to send stderr
MESSAGEPORT=@MESSAGEPORT@
MESSAGEGROUP=239.1.1.234          # or set to NONE if not using ASYNC messaging

# Message pub/sub
# PUB_ENDPOINT=tcp://127.0.0.1:<PORT>
# SUB_ENDPOINT=tcp://127.0.0.1:<PORT>
#
PUB_ENDPOINT="tcp://127.0.0.1:@MESSAGE_BROKER_SUB_PORT@"
SUB_ENDPOINT="tcp://127.0.0.1:@MESSAGE_BROKER_PUB_PORT@"

# daemon ports
# These are the ports for other daemons that slicecamd talks to
#
TCSD_PORT=@TCSD_BLK_PORT@
ACAMD_PORT=@ACAMD_BLK_PORT@
# AUTOACQ_ARGS defines defaults for slicecamd in-process ngps_acq.
# This line intentionally includes all supported ngps_acq options.
AUTOACQ_ARGS=--input /tmp/slicecam.fits --frame-mode stream --framegrab-out /tmp/ngps_acq.fits --goal-x 151.25 --goal-y 115.25 --pixel-origin 1 --max-dist 40 --snr 10 --min-adj 4 --filt-sigma 1.2 --centroid-hw 6 --centroid-sigma 2.0 --extname L --extnum 1 --bg-x1 80 --bg-x2 200 --bg-y1 30 --bg-y2 210 --search-x1 80 --search-x2 200 --search-y1 30 --search-y2 210 --loop 1 --cadence-sec 2 --max-samples 10 --min-samples 3 --prec-arcsec 0.15 --goal-arcsec 0.15 --max-cycles 20 --gain 1.0 --adaptive 1 --adaptive-faint 500 --adaptive-faint-goal 500 --adaptive-bright 40000 --adaptive-bright-goal 10000 --reject-identical 1 --reject-after-move 3 --settle-sec 0.0 --max-move-arcsec 10 --continue-on-fail 0 --tcs-set-units 0 --use-putonslit 1 --dra-use-cosdec 1 --tcs-sign +1 --wait-guiding 1 --guiding-poll-sec 1.0 --guiding-timeout-sec 120 --debug 1 --debug-out ./ngps_acq_debug.ppm --dry-run 0 --verbose 1

# ANDOR=( <name> [emulate] <sn> <scale> <hflip> <vflip> <rot> <temp> <hbin> <vbin> )
# For each slice camera specify:
#       <name>  name which is expected to be { L R }
#       <sn>    Andor serial number (or "emulate")
#       <scale> pixel scale in arcsec/pixel
#       <hflip> horizontal flip 1=enable 0=disable
#       <vflip> vertical flip 1=enable 0=disable
#       <rot>   rotate 90 deg: { cw ccw none }
#       <temp>  temperature setpoint in deg C
#       <hbin>  horizontal binning (power of 2)
#       <vbin>  vertical binning (power of 2)
# There should be one "L" camera and one "R" camera, which
# designates left and right, respectively, the perspective
# as shown in the GUI.
#
# Include "emulate" to emulate the Andor and use a serial number in {1001,1002,...,1008}.
#
ANDOR=(L emulate 1002 0.06 1 1 none 0 4 4)
ANDOR=(R emulate 1003 0.06 1 1 none 0 4 4)
#ANDOR=(L 14223 0.06 1 1 none -60 4 4)
#ANDOR=(R 10333 0.06 0 0 none -60 4 4)  # from DBSP
#ANDOR=(R 13452 0.06 0 0 none -60 4 4) # s/n for ACAM

# PUSH_GUI_SETTINGS=<file>
# This defines the shell script which pushes settings to the
# SAOimage GUI display.
#
PUSH_GUI_SETTINGS=/Users/cfremling/Projects/NGPS_codebase/NGPS/GuiderGUI/push_settings_slicev.sh

# PUSH_GUI_IMAGE=<file>
# This defines the shell script which pushes images to the
# SAOimage GUI display.
#
PUSH_GUI_IMAGE=/Users/cfremling/Projects/NGPS_codebase/NGPS/GuiderGUI/push_image.sh

# SkySimulator options:
#   SKYSIM_IMAGE_SIZE=<is>   where <is> is integer
# Sets the keyword argument "IMAGE_SIZE=<is>"
# used for the Python skysim module.
#
SKYSIM_IMAGE_SIZE=256

# SkySimulator randomization (emulator only):
#   SKYSIM_ARGS="key=value"   (one per line)
SKYSIM_ARGS="SIM_SEEING_FWHM_MIN=0.8"
SKYSIM_ARGS="SIM_SEEING_FWHM_MAX=1.6"
SKYSIM_ARGS="SIM_TRANSPARENCY=1.0"
SKYSIM_ARGS="SIM_PSF_COMA_MAX=0.2"
SKYSIM_ARGS="SIM_TRACK_JITTER_MAX=0.1"
SKYSIM_ARGS="SIM_TRAIL_ENABLE=1"
SKYSIM_ARGS="SIM_TRAIL_MAX_STEPS=75"
SKYSIM_ARGS="SIM_TRAIL_KERNEL=LINE"
SKYSIM_ARGS="SIM_TRAIL_WIDTH_PX=AUTO"
# Optional fixed seed for reproducibility:
# SKYSIM_ARGS="SIM_SEED=12345"
# These keys are parsed by Python/acam_skyinfo/skysim.py.
